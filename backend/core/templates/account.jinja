{% extends "base.jinja" %}

{% block heading %}
    Account
{% endblock %}

{% block content %}
    <h2>Settings</h2>
    <p>
        <strong>Current Email:</strong> {{ current_user.email }}<br/>
        <strong>API Key:</strong>
        {% if current_user.api_key %}
            {{ current_user.api_key }}
        {% else %}
            <em>No key generated yet</em>
        {% endif %}
    </p>

    <form method="POST" action="{{ url_for('web.account') }}" onsubmit="return confirm('Are you sure you want to generate a new API key? This will replace your current key.');">
        <button type="submit" name="generate_key" value="1">Generate New API Key</button>
    </form>
    <br/>
    <button onclick="window.location.href='{{ url_for('web.jobs') }}'">Manage Jobs</button><br/>
    <br/>
    <button onclick="window.location.href='{{ url_for('web.imports') }}'">Manage Imports</button><br/>
    <br/>
    <button onclick="window.location.href='{{ url_for('web.exports') }}'">Exports</button><br/>

    <hr/>

    <h3>Change Email / Password</h3>
    <form method="POST" action="{{ url_for('web.account') }}">
        <label for="new_email">New Email (optional):</label><br/>
        <input type="text" id="new_email" name="new_email"><br/>
        <br/>
        <label for="new_password">New Password (optional):</label><br/>
        <input type="password" id="new_password" name="new_password"><br/>
        <br/>
        <button type="submit" name="update_account" value="1">Update Account</button>
    </form>
{% endblock %}
